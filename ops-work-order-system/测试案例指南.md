# 🏢 某省电力公司运维管理系统 - 完整测试指南

## 📋 案例背景

**某省电力公司** 是一家大型国有电力企业，采用省-市-县三级管理架构：
- **省级**：某省电力公司总部、调度中心、信息中心
- **市级**：郑州、洛阳、开封供电公司及其分中心
- **县级**：各区县供电所

## 🚀 快速开始测试

### 1. 导入测试数据

```bash
# 进入项目目录
cd ops-work-order-system

# 导入测试数据
mysql -u root -p ops_work_order_system < src/main/resources/data-test-case.sql
```

### 2. 启动系统

```bash
mvn spring-boot:run
```

### 3. 访问系统
- **地址**：http://localhost:8080
- **管理员账号**：admin / admin

## 👥 测试用户账号

### 🏛️ 省级用户
| 用户名 | 密码 | 姓名 | 角色 | 部门 | 测试场景 |
|--------|------|------|------|------|----------|
| li_zong | password | 李总经理 | ADMIN | 某省电力公司 | 最高权限管理 |
| zhang_zr | password | 张主任 | MANAGER | 信息中心 | 技术项目管理 |
| wang_dd | password | 王调度长 | MANAGER | 调度中心 | 调度业务管理 |

### 🏢 市级用户  
| 用户名 | 密码 | 姓名 | 角色 | 部门 | 测试场景 |
|--------|------|------|------|------|----------|
| chen_jl | password | 陈经理 | MANAGER | 郑州供电公司 | 市级管理 |
| liu_wy | password | 刘经理 | MANAGER | 洛阳供电公司 | 市级管理 |
| zhao_hl | password | 赵经理 | MANAGER | 开封供电公司 | 市级管理 |
| wu_dd | password | 吴调度 | OPERATOR | 郑州调度分中心 | 调度操作 |
| sun_zg | password | 孙主管 | OPERATOR | 郑州信息分中心 | 技术支持 |

### 🏪 县级用户
| 用户名 | 密码 | 姓名 | 角色 | 部门 | 测试场景 |
|--------|------|------|------|------|----------|
| ma_sz | password | 马所长 | OPERATOR | 中原区供电所 | 基层管理 |
| tian_sz | password | 田所长 | OPERATOR | 金水区供电所 | 基层管理 |
| he_szl | password | 何所长 | OPERATOR | 二七区供电所 | 基层管理 |

### 👷 技术专家
| 用户名 | 密码 | 姓名 | 角色 | 部门 | 测试场景 |
|--------|------|------|------|------|----------|
| tech_zhang | password | 张工程师 | OPERATOR | 信息中心 | 技术专家 |
| tech_li | password | 李工程师 | OPERATOR | 郑州信息分中心 | 技术支持 |
| repair_chen | password | 陈维修工 | OPERATOR | 金水区供电所 | 维修工作 |

## 🧪 功能测试场景

### 🎫 1. 工单管理功能测试

#### 📋 查看现有工单
**登录：** chen_jl (陈经理)
**操作：**
1. 访问"工单管理"页面
2. 查看各种状态的工单：
   - 🔴 应急工单：开封供电公司调度系统故障
   - 🟡 故障工单：中原区街道照明故障  
   - 🔵 维护工单：洛龙区10kV线路绝缘子清扫
   - ⚪ 需求工单：郑州地区配电自动化系统升级

#### ✏️ 创建新工单
**登录：** ma_sz (马所长)
**操作：**
1. 点击"创建工单"
2. 创建应急工单：
   - **标题**：中原区变压器爆炸事故
   - **类型**：应急工单
   - **优先级**：紧急
   - **描述**：中原区某小区10kV配电变压器发生爆炸，需要立即抢修
   - **分配给**：tech_wang (王技术员)

#### 🔍 工单筛选测试
**操作：**
1. 按状态筛选：查看"进行中"的工单
2. 按优先级筛选：查看"紧急"工单
3. 按部门筛选：查看"中原区供电所"的工单
4. 关键词搜索：搜索"变电站"

### 🏷️ 2. 工单类型管理测试

#### 📊 类型管理页面
**登录：** zhang_zr (张主任)
**操作：**
1. 访问"类型管理"页面
2. 查看四种工单类型：
   - ⚡ 应急工单：2小时时限，红色标识
   - 🔧 故障工单：8小时时限，橙色标识
   - 🛠️ 维护工单：72小时时限，蓝色标识
   - 📋 需求工单：168小时时限，灰色标识

#### 📈 类型对比分析
**操作：**
1. 点击"类型对比"按钮
2. 查看雷达图对比各类型特性
3. 查看响应时间对比饼图
4. 测试导出对比报告功能

### 🏢 3. 部门管理测试

#### 🌳 部门架构查看
**登录：** li_zong (李总经理)
**操作：**
1. 访问"部门管理"页面
2. 查看三级部门架构：
   - 省级：某省电力公司 → 调度中心 → 信息中心
   - 市级：郑州/洛阳/开封供电公司 → 各分中心
   - 县级：各区县供电所

#### 📞 联系人信息查看
**操作：**
1. 点击各部门查看联系人信息
2. 验证电话、邮箱等联系方式
3. 测试编辑部门信息功能

### ⚡ 4. 工作流管理测试

#### 🔄 审批流程查看
**登录：** zhao_hl (赵经理)
**操作：**
1. 访问"工作流管理"页面
2. 查看待审批工单：
   - 开封龙亭区配电设备预防性试验（待县所负责人审批）

#### ✅ 审批操作测试  
**登录：** zhu_sz (朱所长)
**操作：**
1. 查看分配给自己的审批任务
2. 审批"开封龙亭区配电设备预防性试验"工单
3. 添加审批意见
4. 确认审批，工单流转到下一级

### 📊 5. 统计报表测试

#### 📈 每日统计测试
**登录：** li_zong (李总经理)
**操作：**
1. 访问"统计报表" → "每日统计"
2. 查看汇总卡片：总工单数、完成数、完成率
3. 查看趋势图表（最近7天）
4. 筛选日期范围查看历史数据
5. 导出Excel报表

#### 📅 每周报表测试
**操作：**
1. 访问"每周报表"页面
2. 查看周统计卡片
3. 查看柱状图+折线图的双轴图表
4. 查看每周详情卡片

#### ⚠️ 超时预警测试
**操作：**
1. 访问"超时预警"页面
2. 查看分级预警统计：
   - 🟡 轻微超时 (1-12小时)
   - 🟠 严重超时 (12-24小时)  
   - 🔴 紧急超时 (>24小时)
3. 查看超时工单列表和处理建议
4. 测试30秒自动刷新功能

#### 🏆 部门效率分析测试
**操作：**
1. 访问"部门效率分析"页面
2. 查看效率排行榜（冠亚季军）
3. 查看柱状图对比和饼图分布
4. 查看综合评分和效率评级

### 👥 6. 用户权限测试

#### 🔐 权限级别验证
**测试步骤：**
1. **ADMIN (li_zong)**：可访问所有功能和数据
2. **MANAGER (chen_jl)**：可管理本部门及下级部门
3. **OPERATOR (ma_sz)**：只能查看和处理分配给自己的工单

#### 📊 数据隔离测试
**操作：**
1. 用不同层级用户登录
2. 验证只能看到相应权限范围内的数据
3. 测试跨部门数据访问限制

## 🎯 重点测试场景

### 🚨 应急响应场景
**场景：** 中原区10kV线路突发跳闸
1. **报告**：ma_sz发现故障并创建应急工单
2. **分配**：chen_jl接收并分配给tech_wang
3. **处理**：tech_wang现场处理并更新状态
4. **完成**：故障排除，工单关闭
5. **统计**：查看应急工单处理效率

### 🔧 维护工作场景  
**场景：** 金水区35kV变电站春季检修
1. **申请**：tian_sz创建维护工单
2. **审批**：
   - chen_jl (部门经理) 审批
   - li_zong (安全部门) 审批
3. **执行**：repair_chen执行维护作业
4. **验收**：完成验收并关闭工单

### 📈 数据分析场景
**场景：** 月度运维效率分析
1. **数据查看**：li_zong查看全省统计数据
2. **部门对比**：分析各市公司效率排名
3. **趋势分析**：查看工单量变化趋势
4. **报表导出**：导出Excel分析报告

## ✅ 测试检查清单

### 🎫 工单管理
- [ ] 工单创建（各种类型）
- [ ] 工单分配和转派
- [ ] 状态流转（待处理→进行中→已完成）
- [ ] 优先级管理
- [ ] 截止时间计算
- [ ] 搜索和筛选功能

### 🏷️ 工单类型管理
- [ ] 类型配置查看
- [ ] 类型特性对比
- [ ] 可视化图表展示
- [ ] 导出对比分析

### 🏢 部门管理
- [ ] 三级架构展示
- [ ] 部门信息管理
- [ ] 联系人管理
- [ ] 权限分配

### ⚡ 工作流管理
- [ ] 审批流程配置
- [ ] 多级审批支持
- [ ] 并行/串行审批
- [ ] 自动流转机制

### 📊 统计报表
- [ ] 每日统计分析
- [ ] 每周报表
- [ ] 超时预警监控
- [ ] 部门效率分析
- [ ] Excel导出功能

### 👥 用户权限
- [ ] 角色权限控制
- [ ] 数据隔离
- [ ] 操作权限验证

## 🐛 常见问题排查

### 1. 数据不显示
**原因：** 可能是用户权限不足或数据权限隔离
**解决：** 使用admin账号或对应权限用户

### 2. 工单无法创建
**原因：** 可能是必填字段未填写或分配人权限问题
**解决：** 检查表单完整性和用户权限

### 3. 审批流程卡住
**原因：** 审批人可能没有相应权限或流程配置问题
**解决：** 检查审批人角色权限和工作流配置

### 4. 统计数据为空
**原因：** 测试数据时间范围问题或查询条件过滤
**解决：** 调整时间范围或重新导入测试数据

## 📞 技术支持

如在测试过程中遇到问题，请检查：
1. 数据是否正确导入
2. 用户权限是否正确
3. 时间范围是否合适
4. 浏览器控制台是否有错误信息

---

🎉 **祝您测试愉快！通过这个完整的案例，您可以体验到运维工单系统的所有核心功能。** 